<?python
if instance.id:
    title = _('Edit course details')
else:
    title = _('Add a new course site')
?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
<xi:include href="master.xhtml"/>
<head>
  <title>${title}</title>
  <script type="text/javascript" src="/static/add_new_course.js"/>
</head>
<body>
  <h1>${title}</h1>
  <ul py:for="fld in form" py:if="fld.errors">
    <li py:for="err in fld.errors">${fld.name}: ${err}</li>
  </ul>
  <form action="." method="POST">
    <tr py:def="field_row(field, example=None)">
      <th>${field.label}</th>
      <td>
	<ul py:if="field.errors" class="errorlist">
	  <li py:for="err in field.errors">${err}</li>
	</ul>
	${Markup(field)}
      </td>
      <td class="example" py:if="example">e.g., ${example}</td>
    </tr>
  <fieldset>
    <legend>General description</legend>
    <table class="formtable">
    ${field_row(form.code, example)}
    ${field_row(form.title)}
    ${field_row(form.term)}
    ${field_row(form.department)}
    <!-- <tr><th>Department</th><td>${Markup(form.department)} ${errorlist(form.department)}</td></tr> -->
  </table>
  </fieldset>
  <fieldset>
    <legend>Access controls</legend>
    <p>This site will be available to:</p>
    ${Markup(form.access)}
  </fieldset>
  <p><input type="submit" value="Continue"/></p>
  </form>

  <div class="gap"/>
</body>
</html>
