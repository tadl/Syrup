<?python
if instance.id:
    title = _('Site setup')
else:
    title = _('Create a new site')
?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
<xi:include href="master.xhtml"/>
<xi:include href="components/site.xhtml"/>
<head>
  <title>${title}</title>
  <script type="text/javascript" src="${ROOT}/static/edit_site.js"/>
</head>
<body>
  <div py:if="instance.id">${site_banner(instance)}</div>
  <h1>${title}</h1>
  <div py:with="nfe=form.non_field_errors()">
    <ul py:if="nfe" class="errorlist">
      <li py:for="err in nfe">${err}</li>
    </ul>
  </div>
  <form action="." method="POST">
    <tr py:def="field_row(field, example=None)">
      <th>${field.label}</th>
      <td>
	<ul py:if="field.errors" class="errorlist">
	  <li py:for="err in field.errors">${err}</li>
	</ul>
	${Markup(field)}
      </td>
      <td class="example" py:if="example">e.g., ${example}</td>
    </tr>
    <table class="metadata_table">
    ${field_row(form.owner)}
    ${field_row(form.term)}
    ${field_row(form.course)}
    ${field_row(form.service_desk)}

    <!-- ${field_row(form.department)} -->
    <!-- <tr><th>Department</th><td>${Markup(form.department)} ${errorlist(form.department)}</td></tr> -->
  </table>
  <p><input type="submit" value="Continue"/> ${go_back_link()}</p>
  </form>
  <div class="gap"/>
  <div py:if="instance.id">
    <h2>Delete this site</h2>
    <form action="delete/" method="POST">
      <p><input type="checkbox" name="confirm_delete" id="confirm_delete"/>
      <label for="confirm_delete">Yes, I want to delete this site and all of its contents.</label>
      </p>
      <p><input type="submit" value="Delete this site"/> ${go_back_link()}</p>
    </form>
  </div>
</body>
</html>
