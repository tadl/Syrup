<?python
is_edit = bool(item.id)
title = is_edit and _('Edit an electronic document') or _('Add a new electronic document')
course_title = '%s: %s (%s)' % (course.code, course.title, course.term)
?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
  <xi:include href="master.xhtml"/>
  <xi:include href="components/course.xhtml"/>
  <head>
    <title>${title}</title>
    <script type="text/javascript">
      $(function() {$('input[@name="title"]').focus();});
    </script>
  </head>
  <body>
    ${course_banner(course)}
    ${nested_title(parent_item)}
    <h3>${title}</h3>
    <div py:if="not is_edit">
      <form action=".?item_type=${item_type}" method="POST"
	    enctype="multipart/form-data">
	<table>
	  <tr><th>Title of document</th><td><input type="text" 
	  name="title"
	  value="${item.title}"/></td></tr>
	  <tr><th>File</th><td><input type="file" name="file"/></td></tr>
	</table>
	<p><input type="submit" value="Upload file and Create item"/></p>
      </form>
    </div>

    <div py:if="is_edit">
      <form action="." method="POST">
	<table>
	  <tr><th>Title of document</th><td><input type="text" name="title"
	  value="${item.title}"/></td></tr>
	</table>
	<p><input type="submit" value="Update item"/></p>
      </form>
      <h3>Replace the current file with a new file</h3>
      <form action="." method="POST" enctype="multipart/form-data">
	<table>
	  <tr><th>File</th><td><input type="file" name="file"/></td></tr>
	</table>
	<p><input type="submit" value="Upload new file"/></p>
      </form>
    </div>
</body>
</html>
