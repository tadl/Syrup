<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

  <!-- !show_tree: display a tree of items in a hierarchical style. -->
  <ul py:def="show_tree(tree)" py:if="tree" class="itemtree">
    <li py:for="item, subs in tree">
      <a href="/syrup/course/${item.course_id}/item/${item.id}/">${item}</a> 
      <span class="metalinks">
	[<a href="${item_url(item)}meta/">about</a>
	&bull; <a href="${item_url(item)}edit/">edit</a>
	]
      </span>
      ${show_tree(subs)}
    </li>
  </ul>

  <div py:def="nested_title(item)"
       py:with="hier=item.hierarchy()[:-1]; lastnum=len(hier)"
       class="nestedtitle">
    <span py:for="n, x in enumerate(hier)"
	 style="margin-left: ${n}em;"><a href="${item_url(x)}">${x.title}</a> &bull; </span>
<h2>${item.title}</h2>
  </div>
</html>
