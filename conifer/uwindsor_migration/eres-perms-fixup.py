#!/usr/bin/env python-django

from syrup.models import *
import people
import re
from pprint import pprint

lookup = {
'sorsini':["0134160-91-2010S","0134160-92-2010F","0134160-92-2010S","0134160-92-2011W","0134160-93-2010S"],
'parr1':["0134160-91-2010F","0134160-91-2011W","0134260-1-2010F","0134266-1-2011W","0134342-1-2011W"],
'rdienesc':["0243218-1-2011W","0243397-1-2010S","0243497-2-2010F","0243497-3-2011W","0245361-1-2010S","0245361-91-2010F"],
'burrc':["0243302-1-2011W","0243368-1-2010F","0243441-1-2010F","0243497-2-2011W","0243597-1-2010F"],
'huffaker':["0243111-1-2011W","0243297-1-2010F","0243397-1-2011W","0243497-1-2010F","0243597-2-2010F"],
'psamson':["0247204-1-2011W","0247622-2-2010F"],
'afitz':["0248367-1-2010F","0248370-1-2011W","0248465-1-2010F","0248465-1-2010S","0248567-1-2011W"],
'lewis3':["0248310-1-2010F","0248310-3-2010F","0248310-6-2010F","0248460-1-2011W"],
'yshhsy':["0247118-1-2010S","0247347-30-2011W","0247547-1-2010S","0247680-4-2011W","0253347-30-2011W"],
'pmckay':["1163372-1-2010F","1163372-10-2010F","1163372-11-2010F","1163372-12-2010F","1163372-13-2010F","1163372-14-2010F","1163372-15-2010F","1163372-16-2010F","1163372-17-2010F","1163372-18-2010F","1163372-19-2010F","1163372-20-2010F","1163372-21-2010F","1163372-22-2010F","1163372-23-2010F","1163372-24-2010F","1163372-25-2010F","1163372-26-2010F","1163372-27-2010F","1163372-28-2010F","1163372-29-2010F","1163372-30-2010F","1163372-31-2010F","1163372-32-2010F","1163372-33-2010F","1163372-34-2010F","1163372-35-2010F","1163372-36-2010F","1163372-37-2010F","1163372-38-2010F","1163372-39-2010F","1163372-4-2010F","1163372-40-2010F","1163372-41-2010F","1163372-42-2010F","1163372-43-2010F","1163372-44-2010F","1163372-45-2010F","1163372-46-2010F","1163372-47-2010F","1163372-48-2010F","1163372-49-2010F","1163372-5-2010F","1163372-51-2010F","1163372-52-2010F","1163372-53-2010F","1163372-54-2010F","1163372-55-2010F","1163372-56-2010F","1163372-58-2010F","1163372-59-2010F","1163372-6-2010F","1163372-60-2010F","1163372-61-2010F","1163372-62-2010F","1163372-63-2010F","1163372-64-2010F","1163372-65-2010F","1163372-7-2010F","1163372-8-2010F","1163372-9-2010F","1163374-1-2011W","1163374-10-2011W","1163374-11-2011W","1163374-12-2011W","1163374-13-2011W","1163374-14-2011W","1163374-15-2011W","1163374-16-2011W","1163374-17-2011W","1163374-18-2011W","1163374-19-2011W","1163374-20-2011W","1163374-21-2011W","1163374-22-2011W","1163374-23-2011W","1163374-24-2011W","1163374-25-2011W","1163374-26-2011W","1163374-27-2011W","1163374-28-2011W","1163374-29-2011W","1163374-30-2011W","1163374-31-2011W","1163374-32-2011W","1163374-33-2011W","1163374-34-2011W","1163374-35-2011W","1163374-36-2011W","1163374-37-2011W","1163374-38-2011W","1163374-39-2011W","1163374-40-2011W","1163374-41-2011W","1163374-42-2011W","1163374-43-2011W","1163374-44-2011W","1163374-45-2011W","1163374-46-2011W","1163374-47-2011W","1163374-48-2011W","1163374-49-2011W","1163374-9-2011W","1163378-10-2011W","1163378-11-2011W","1163378-12-2011W","1163378-13-2011W","1163378-14-2011W","1163378-15-2011W","1163378-16-2011W","1163378-17-2011W","1163378-18-2011W","1163378-19-2011W","1163378-20-2011W","1163378-21-2011W","1163378-22-2011W","1163378-23-2011W","1163378-24-2011W","1163378-25-2011W","1163378-26-2011W","1163378-27-2011W","1163378-28-2011W","1163378-29-2011W","1163378-30-2011W","1163378-31-2011W","1163378-32-2011W","1163378-33-2011W","1163378-34-2011W","1163378-35-2011W","1163378-36-2011W","1163378-37-2011W","1163378-38-2011W","1163378-39-2011W","1163378-4-2011W","1163378-40-2011W","1163378-41-2011W","1163378-42-2011W","1163378-43-2011W","1163378-44-2011W","1163378-45-2011W","1163378-46-2011W","1163378-47-2011W","1163378-48-2011W","1163378-5-2011W","1163378-6-2011W","1163378-7-2011W","1163378-8-2011W","1163378-9-2011W","1163472-10-2011W","1163472-11-2010F","1163472-11-2010S"],
}

for site in Site.objects.all():
    if site.group_set.count() < 2:
        print site.course.code, site.owner.username
        codes = lookup[site.owner.username]
        thispat = re.compile('%s-.*-2011W' % (site.course.code.replace('-','')))
        goodcodes = [c for c in codes if thispat.match(c)]
        for code in goodcodes:
            site.group_set.get_or_create(external_id=code)

